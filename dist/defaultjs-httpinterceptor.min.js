!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));const r=(()=>"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{})()}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var r=n(0);const o=[];let i={};const a={config:{ignoreDocumentOrigin:!0,ignoreOrigins:[]},interceptors:[],doIntercept:function(e){return a.config.ignoreDocumentOrigin&&e.metadata.origin==r.a.location.origin?Promise.resolve(e):void 0!==a.config.ignoreOrigins&&function(e,t){for(let n=0;n<t.length;n++)if(e.metadata.origin==t[n])return!0;return!1}(e,a.config.ignoreOrigins)?Promise.resolve(e):function(e){const t=i[e.metadata.origin];if(void 0!==t)return t;const n=o.map(t=>Promise.resolve(t.doAccept(e)).then(e=>e?t:void 0));return i[e.metadata.origin]=Promise.all(n).then(e=>e.filter(e=>void 0!==e)),i[e.metadata.origin]}(e).then(t=>{if(void 0===t||0==t.length)return Promise.resolve(e);let n=Promise.resolve(e);return t.forEach(e=>{n=n.then(e.doHandle)}),n})},addInterceptor:function(e){if(1!=arguments.length&&"object"!=typeof e)throw new Error("function required an interceptor");if("function"!=typeof e.doAccept)throw new Error('The interceptor required a "doAccept" function!');if("function"!=typeof e.doHandle)throw new Error('The interceptor required a "doHandle" function!');return o.push(e),a},reset:()=>{i={}}};var s=a;if(void 0!==r.a.XMLHttpRequest){const e=r.a.XMLHttpRequest,t=function(t){e.prototype.open.call(this,t.request.method,t.url,t.metadata.async,t.metadata.username,t.metadata.password),void 0!==t.request.headers&&Object.getOwnPropertyNames(t.request.headers).forEach(n=>{e.prototype.setRequestHeader.call(this,n,t.request.headers[n])}),e.prototype.send.call(this,t.request.body)},n=function(){const n=new e(arguments);let o=void 0;return n.setRequestHeader=function(e,t){o.request.headers=o.request.headers||{},o.request.headers[e]=t},n.open=function(e,t,n,i,a){const s=new URL(t,r.a.location.origin);o={url:t,request:{method:e},metadata:{method:e,origin:s.origin,protocol:s.protocol,hostname:s.hostname,port:s.port,path:s.pathname,query:s.search,hash:s.hash,async:"boolean"!=typeof n||n,username:i,password:a}}},n.send=function(e){o.metadata.async?(o.request.body=e,s.doIntercept(o).then(t.bind(n)).catch(console.error)):t.call(n,o)},n};r.a.XMLHttpRequest=n,r.a.XMLHttpRequest.prototype=e.prototype,r.a.XMLHttpRequest.prototype.constructor=n}const c=r.a.fetch;r.a.fetch=function(e,t){const n=new URL(e,r.a.location.origin);return s.doIntercept({url:e,request:t||{},metadata:{method:void 0===t?"GET":t.method||"GET",origin:n.origin,protocol:n.protocol,hostname:n.hostname,port:n.port,path:n.pathname,hash:n.hash,query:n.search,async:!0}}).then(e=>c(e.url,e.request))};var u=function(e){const t=e;let n=void 0;return{doAccept:t.doAccept||function(e){const n=typeof t.condition;if("function"===n)return Promise.resolve(t.condition(e));if("string"===n)return Promise.resolve(t.condition==e.metadata.origin);if(t.condition instanceof Array)for(let n=0;n<t.condition.length;n++)if(t.condition[n]==e.metadata.origin)return Promise.resolve(!0);return Promise.resolve(!1)},doHandle:function(e){return n||(n=Promise.resolve(t.fetchToken()).then(e=>(function(){if(t.refreshInterval>0){const e="function"==typeof t.refreshToken?function(){n=Promise.resolve(t.refreshToken())}:function(){n=Promise.resolve(t.fetchToken())};setInterval(e,t.refreshInterval||6e4)}}(),e))),n.then(n=>(function(e,t,n){if(n instanceof Array){let r=Promise.resolve(t);return n.forEach(t=>{r=r.then(n=>t(e,n))}),r}return Promise.resolve(n(e,t))})(n,e,t.appendToken))}}};var f={OAuthInterceptor:function(e){const t=e;return t.fetchToken=function(){return fetch(t.login.url,{method:t.login.method||"get"}).then(e=>e.json()).then(e=>e[t.login.response.valueSelector])},t.appendToken=function(e,t){return t.request.headers=t.request.headers||{},t.request.headers.Authorization="Bearer "+e,t},u(e)},TokenInterceptor:u};r.a.defaultjs=r.a.defaultjs||{},r.a.defaultjs.httpinterceptor=r.a.defaultjs.httpinterceptor||{VERSION:"1.1.0",Manager:s,interceptors:f}}]);
//# sourceMappingURL=defaultjs-httpinterceptor.min.js.map